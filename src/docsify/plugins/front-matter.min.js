var errors=[],reference_blocks=[],processing_time=0,regex={regLevel:new RegExp("^([\\s\\-]+)"),invalidLine:new RegExp("^\\-\\-\\-|^\\.\\.\\.|^\\s*#.*|^\\s*$"),dashesString:new RegExp('^\\s*\\"([^\\"]*)\\"\\s*$'),quotesString:new RegExp("^\\s*\\'([^\\']*)\\'\\s*$"),float:new RegExp("^[+-]?[0-9]+\\.[0-9]+(e[+-]?[0-9]+(\\.[0-9]+)?)?$"),integer:new RegExp("^[+-]?[0-9]+$"),array:new RegExp("\\[\\s*(.*)\\s*\\]"),map:new RegExp("\\{\\s*(.*)\\s*\\}"),key_value:new RegExp("([a-z0-9_-][ a-z0-9_-]*):( .+)","i"),single_key_value:new RegExp("^([a-z0-9_-][ a-z0-9_-]*):( .+?)$","i"),key:new RegExp("([a-z0-9_-][ a-z0-9_-]+):( .+)?","i"),item:new RegExp("^-\\s+"),trim:new RegExp("^\\s+|\\s+$"),comment:new RegExp("([^\\'\\\"#]+([\\'\\\"][^\\'\\\"]*[\\'\\\"])*)*(#.*)?")};function Block(e){return{parent:null,length:0,level:e,lines:[],children:[],addChild:function(e){this.children.push(e),++(e.parent=this).length}}}function parser(e){var r,n=regex.regLevel,t=regex.invalidLine,l=e.split("\n"),s=0,i=0,o=[],a=new Block(-1),c=new Block(0);a.addChild(c);var u=[],f="";o.push(c),u.push(s);for(var p=0,g=l.length;p<g;++p)if(!(f=l[p]).match(t)){if(i<(s=(r=n.exec(f))?r[1].length:0)){var h=c;c=new Block(s),h.addChild(c),o.push(c),u.push(s)}else if(s<i){for(var d=!1,v=u.length-1;0<=v;--v)if(u[v]==s){c=new Block(s),o.push(c),u.push(s),null!=o[v].parent&&o[v].parent.addChild(c),d=!0;break}if(!d)return void errors.push("Error: Invalid indentation at line "+p+": "+f)}c.lines.push(f.replace(regex.trim,"")),i=s}return a}function processValue(e){var r=null;if("true"==(e=e.replace(regex.trim,"")))return!0;if("false"==e)return!1;if(".NaN"==e)return Number.NaN;if("null"==e)return null;if(".inf"==e)return Number.POSITIVE_INFINITY;if("-.inf"==e)return Number.NEGATIVE_INFINITY;if(r=e.match(regex.dashesString))return r[1];if(r=e.match(regex.quotesString))return r[1];if(r=e.match(regex.float))return parseFloat(r[0]);if(r=e.match(regex.integer))return parseInt(r[0]);if(isNaN(r=Date.parse(e))){if(r=e.match(regex.single_key_value))return(l={})[r[1]]=processValue(r[2]),l;if(r=e.match(regex.array)){for(var n=0,t=" ",l=[],s="",i=!1,o=0,a=r[1].length;o<a;++o){if("'"==(t=r[1][o])||'"'==t){if(!1===i){s+=i=t;continue}if("'"==t&&"'"==i||'"'==t&&'"'==i){i=!1,s+=t;continue}}else if(!1!==i||"["!=t&&"{"!=t)if(!1!==i||"]"!=t&&"}"!=t){if(!1===i&&0==n&&","==t){l.push(processValue(s)),s="";continue}}else--n;else++n;s+=t}return 0<s.length&&l.push(processValue(s)),l}if(r=e.match(regex.map)){for(n=0,t=" ",l=[],s="",i=!1,o=0,a=r[1].length;o<a;++o){if("'"==(t=r[1][o])||'"'==t){if(!1===i){s+=i=t;continue}if("'"==t&&"'"==i||'"'==t&&'"'==i){i=!1,s+=t;continue}}else if(!1!==i||"["!=t&&"{"!=t)if(!1!==i||"]"!=t&&"}"!=t){if(!1===i&&0==n&&","==t){l.push(s),s="";continue}}else--n;else++n;s+=t}0<s.length&&l.push(s);var c={};for(o=0,a=l.length;o<a;++o)(r=l[o].match(regex.key_value))&&(c[r[1]]=processValue(r[2]));return c}return e}return new Date(r)}function processFoldedBlock(e){for(var r=e.lines,n=e.children,t=[r.join(" ")],l=0,s=n.length;l<s;++l)t.push(processFoldedBlock(n[l]));return t.join("\n")}function processLiteralBlock(e){for(var r=e.lines,n=e.children,t=r.join("\n"),l=0,s=n.length;l<s;++l)t+=processLiteralBlock(n[l]);return t}function processBlock(e){for(var r=null,n={},t=null,l=null,s=null,i=-1,o=[],a=!0,c=0,u=e.length;c<u;++c)if(-1==i||i==e[c].level){o.push(c),i=e[c].level,t=e[c].lines,l=e[c].children,s=null;for(var f=0,p=t.length;f<p;++f){var g=t[f];if(r=g.match(regex.key)){var h=r[1];if("-"==h[0]&&(h=h.replace(regex.item,""),a&&(a=!1,void 0===n.length&&(n=[])),null!=s&&n.push(s),s={},a=!0),void 0!==r[2]){var d=r[2].replace(regex.trim,"");if("&"==d[0]){var v=processBlock(l);null!=s?s[h]=v:n[h]=v,reference_blocks[d.substr(1)]=v}else if("|"==d[0])null!=s?s[h]=processLiteralBlock(l.shift()):n[h]=processLiteralBlock(l.shift());else if("*"==d[0]){var m=d.substr(1),x={};if(void 0===reference_blocks[m])errors.push("Reference '"+m+"' not found!");else{for(var k in reference_blocks[m])x[k]=reference_blocks[m][k];null!=s?s[h]=x:n[h]=x}}else">"==d[0]?null!=s?s[h]=processFoldedBlock(l.shift()):n[h]=processFoldedBlock(l.shift()):null!=s?s[h]=processValue(d):n[h]=processValue(d)}else null!=s?s[h]=processBlock(l):n[h]=processBlock(l)}else{if(g.match(/^-\s*$/)){a&&(a=!1,void 0===n.length&&(n=[])),null!=s&&n.push(s),s={},a=!0;continue}if(r=g.match(/^-\s*(.*)/)){null!=s?s.push(processValue(r[1])):(a&&(a=!1,void 0===n.length&&(n=[])),n.push(processValue(r[1])));continue}}}null!=s&&(a&&(a=!1,void 0===n.length&&(n=[])),n.push(s))}for(c=o.length-1;0<=c;--c)e.splice.call(e,o[c],1);return n}function semanticAnalysis(e){return processBlock(e.children)}function preProcess(e){var r,n=e.split("\n"),t=regex.comment;for(var l in n)(r=n[l].match(t))&&void 0!==r[3]&&(n[l]=r[0].substr(0,r[0].length-r[3].length));return n.join("\n")}function load(e){errors=[],reference_blocks=[],processing_time=(new Date).getTime();var r=semanticAnalysis(parser(preProcess(e)));return processing_time=(new Date).getTime()-processing_time,r}var optionalByteOrderMark="\\ufeff?",pattern="^("+optionalByteOrderMark+"(= yaml =|---)$([\\s\\S]*?)(?:\\2|\\.\\.\\.)$(?:\\n)?)",regex$1=new RegExp(pattern,"m");function extractor(e){var r=(e=e||"").split(/(\r?\n)/);return r[0]&&/= yaml =|---/.test(r[0])?parse(e):{attributes:{},body:e}}function parse(e){var r=regex$1.exec(e);if(!r)return{attributes:{},body:e};var n=r[r.length-1].replace(/^\s+|\s+$/g,"");return{attributes:load(n)||{},body:e.replace(r[0],""),frontmatter:n}}var install=function(e,l){l.config.frontMatter={},l.config.frontMatter.installed=!0,l.config.frontMatter.parseMarkdown=function(e){return extractor(e).body},e.beforeEach(function(e){var r=extractor(e),n=r.attributes,t=r.body;return l.frontmatter=n,t})};$docsify.plugins=[].concat(install,$docsify.plugins);
